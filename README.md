This is based on the xillybus demo code for the Kintex-7 board.